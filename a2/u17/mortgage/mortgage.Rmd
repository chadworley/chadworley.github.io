---
title: "mortgage"
author: "MrW"
output: html_document
---

$$f(n)~~=~~ \left(1+\frac{r}{12}\right)\cdot f(n-1)~-~ k$$

$$f(0)~=~ P$$

$$f(1)~=~P+rP-k$$
$$f(2)~=~(P(1+r)-k)(1+r)-k~=~ (P+Pr-k)(1+r)-k$$

$$f(3)~=~((P(1+r)-k)(1+r)-k)(1+r)-k$$


AAGHHH

$$m~=~\left(1+\frac{r}{12}\right)$$


$$f(n)~~=~~ m\cdot f(n-1)~-~ k$$

$$f(0)~=~ P$$

$$f(1)~=~mP-k$$
$$f(2)~=~m(mP-k)-k~=~m^2P-mk-k$$

$$f(3)~=~m(m^2P-mk-k)-k~=~m^3P-m^2k-mk-k$$


$$f(4)~=~m(m^3P-m^2k-mk-k)-k~=~m^4P-m^3k-m^2k-mk-k$$

$$f(4)~=~ m^4P -k(1+m+m^2+m^3) ~=~ m^4P-k\frac{1-m^4}{1-m}$$


$$f(5)~=~ m^5P -k(1+m+m^2+m^3+m^4) ~=~ m^5P-k\frac{1-m^5}{1-m}$$


$$f(n) ~=~ m^nP-k\frac{1-m^n}{1-m}$$

Solve $f(n)=0$.

$$0 ~=~ m^nP-k\frac{1-m^n}{1-m}$$

$$k\frac{1-m^n}{1-m} ~=~ m^nP$$

$$\frac{k}{1-m} -\frac{km^n}{1-m} ~=~ m^nP$$

$$\frac{k}{1-m} ~=~ m^nP + \frac{km^n}{1-m} $$


$$\frac{k}{1-m} ~=~ m^n\left(P + \frac{k}{1-m}\right) $$


$$\frac{k}{1-m} ~=~ m^n\left(\frac{P-Pm+k}{1-m}\right) $$


$$\frac{k}{P-Pm+k} ~=~ m^n$$



$$\log\left(\frac{k}{P-Pm+k}\right) ~=~ n\log(m)$$


$$n~=~\log_m\left(\frac{k}{P-Pm+k}\right)$$

Remember: $m~=~1+\frac{r}{12}$ and $k=$ monthly payment and $P=$ Principal.



I guess I actually want to know $k$...

$$m^n~=~\frac{k}{P-Pm+k}$$


$$m^nP-m^{n+1}P+m^nk~=~k$$


$$m^nP-m^{n+1}P~=~k-m^nk$$

$$\frac{m^nP-m^{n+1}P}{1-m^n}~=~k$$

CAS

$$k=\frac{Pm^n(m-1)}{m^n-1}$$
