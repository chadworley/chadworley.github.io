---
header-includes:
   - \usepackage{array}
output: pdf_document
params:
    rseed: 0
    showsol: true
    useseed: false
urlcolor: blue
---


```{r,echo=F}
# In the future, you should make it so the domain is never the same as the range!
if(params$useseed){
    set.seed(params$rseed)
}

```

Name: \hspace{4in} Date: \hfill \vspace{3pt} \hrule

## Function-Feature Intervals (version `r params$rseed`)


```{r,echo=F}
while(T){
    xp = sort(sample(-10:10,5))
    while(T){
        yp = sample(1:10,5,T)*c(1,-1,1,-1,-1)*sample(c(-1,1),1)
        if(abs(yp[5])<abs(yp[4])){break}
    }
    
    if(sample(1:2,1)==1){
        yp = rev(yp)
    }
    xa = min(xp):max(xp)
    ya = rep(0,length(xa))
    for(i in 1:length(xa)){
        x = xa[i]
        xl = max(xp[xp<=x])
        xr = min(c(xp[xp>x],xp[length(xp)]))
        yl = yp[xp==xl]
        yr = yp[xp==xr]
        rat = (x-xl)/(xr-xl)
        if(x>xl){
            ya[i] = yl*(1-rat)+yr*rat
        } else {
            ya[i] = yl
        }
    }
    if(sum(ya==0)==3 && !(min(ya)==min(xa) && max(ya)==max(xa)) && length(unique(yp))>3){break}
}

xpn = c(xa[1],xa[ya==0],xa[length(xa)])
ipos = character()
ineg = character()
for(i in 1:(length(xpn)-1)){
    xl = xpn[i]
    xr = xpn[i+1]
    xt = xl+1
    yl = ya[xa==xl]
    yt = ya[xa==xt]
    ymid = mean(c(yl,yt))
    if(ymid>0){
        ipos = c(ipos,paste0("(",xl,", ",xr,")",collapse=""))
    } else {
        ineg = c(ineg,paste0("(",xl,", ",xr,")",collapse=""))
    }
}
iinc = character()
idec = character()
for(i in 1:(length(xp)-1)){
    xl = xp[i]
    xr = xp[i+1]
    xt = xl+1
    yl = ya[xa==xl]
    yt = ya[xa==xt]
    if(yt>yl){
        iinc = c(iinc,paste0("(",xl,", ",xr,")",collapse=""))
    } else {
        idec = c(idec,paste0("(",xl,", ",xr,")",collapse=""))
    }
}


if(params$showsol){
    posint = paste0("$",paste0(ipos,collapse=" \\cup "),"$",collapse="")
    negint = paste0("$",paste0(ineg,collapse=" \\cup "),"$",collapse="")
    incint = paste0("$",paste0(iinc,collapse=" \\cup "),"$",collapse="")
    decint = paste0("$",paste0(idec,collapse=" \\cup "),"$",collapse="")
    domint = paste0("$(",min(xp),", ",max(xp),")$")
    ranint = paste0("$(",min(yp),", ",max(yp),")$")
} else {
    posint = ""
    negint = ""
    incint = ""
    decint = ""
    domint = ""
    ranint = ""
}


```

1. The function $f$ is graphed below.

```{r,echo=F,fig.dim=c(5,4)}
layout(matrix(c(1,1,1,1,2),nrow=1))
par(mar=c(0,0,0,0),pty="s")
plot(xa,ya,"l",xlim=c(-10,10),ylim=c(-10,10),axes=F,ann=F)
for(i in -10:10){
    abline(h=i,col="lightgrey",lwd=0.5)
    abline(v=i,col="lightgrey",lwd=0.5)
}
for(i in seq(-10,10,5)){
    abline(h=i,col="darkgrey",lwd=1)
    abline(v=i,col="darkgrey",lwd=1)
}
arrows(-10.3,0,10.3,0,0.1,10,3,lwd=2)
arrows(0,-10.3,0,10.3,0.1,10,3,lwd=2)
lines(xa,ya,col="blue",lwd=3)
points(xp,yp,pch=20,col="blue",cex=1.6)
points(xa[1],ya[1],pch=20,col="white",cex=0.8)
points(xa[length(xa)],ya[length(xa)],pch=20,col="white",cex=0.8)

text(10,-0.5,"10",cex=0.8)
text(-10,-0.5,"-10",cex=0.8)
text(-0.5,10,"10",cex=0.8)
text(-0.5,-10,"-10",cex=0.8)
text(10,0.5,"x",cex=0.8)
text(0.5,10,"y",cex=0.8)

plot(0,0,"n",axes=F,ann=F)
legend("center",legend="y = f(x)",col="blue",lwd=3)



```
\

Indicate the following intervals using interval notation. Remember, you can use $\cup$ between two intervals to indicate the union. Except for range, all intervals will indicate $x$ values; this is standard.

\begin{tabular}{|m{1in}|m{5in}|}\hline
Feature & Where \\ \hline \hline
Positive & \color{red}`r posint`\color{black} \\  [2.5em]  \hline
Negative & \color{red}`r negint`\color{black} \\  [2.5em]  \hline
Increasing & \color{red}`r incint`\color{black} \\ [2.5em]  \hline
Decreasing & \color{red}`r decint`\color{black} \\ [2.5em]  \hline
Domain & \color{red}`r domint`\color{black} \\ [2.5em]  \hline
Range & \color{red}`r ranint`\color{black} \\ [2.5em]  \hline
\end{tabular}

\newpage

## Function-Feature Intervals (version `r params$rseed`)

```{r,echo=F}
while(T){
    xp = sort(sample(-10:10,5))
    while(T){
        yp = sample(1:10,5,T)*c(1,-1,1,-1,-1)*sample(c(-1,1),1)
        if(abs(yp[5])<abs(yp[4])){break}
    }
    
    if(sample(1:2,1)==1){
        yp = rev(yp)
    }
    xa = min(xp):max(xp)
    ya = rep(0,length(xa))
    for(i in 1:length(xa)){
        x = xa[i]
        xl = max(xp[xp<=x])
        xr = min(c(xp[xp>x],xp[length(xp)]))
        yl = yp[xp==xl]
        yr = yp[xp==xr]
        rat = (x-xl)/(xr-xl)
        if(x>xl){
            ya[i] = yl*(1-rat)+yr*rat
        } else {
            ya[i] = yl
        }
        
    }
    if(sum(ya==0)==3 && !(min(ya)==min(xa) && max(ya)==max(xa)) && length(unique(yp))>3){break}
}

xpn = c(xa[1],xa[ya==0],xa[length(xa)])
ipos = character()
ineg = character()
for(i in 1:(length(xpn)-1)){
    xl = xpn[i]
    xr = xpn[i+1]
    xt = xl+1
    yl = ya[xa==xl]
    yt = ya[xa==xt]
    ymid = mean(c(yl,yt))
    if(ymid>0){
        ipos = c(ipos,paste0("(",xl,", ",xr,")",collapse=""))
    } else {
        ineg = c(ineg,paste0("(",xl,", ",xr,")",collapse=""))
    }
}
iinc = character()
idec = character()
for(i in 1:(length(xp)-1)){
    xl = xp[i]
    xr = xp[i+1]
    xt = xl+1
    yl = ya[xa==xl]
    yt = ya[xa==xt]
    if(yt>yl){
        iinc = c(iinc,paste0("(",xl,", ",xr,")",collapse=""))
    } else {
        idec = c(idec,paste0("(",xl,", ",xr,")",collapse=""))
    }
}


if(params$showsol){
    posint = paste0("$",paste0(ipos,collapse=" \\cup "),"$",collapse="")
    negint = paste0("$",paste0(ineg,collapse=" \\cup "),"$",collapse="")
    incint = paste0("$",paste0(iinc,collapse=" \\cup "),"$",collapse="")
    decint = paste0("$",paste0(idec,collapse=" \\cup "),"$",collapse="")
    domint = paste0("$(",min(xp),", ",max(xp),")$")
    ranint = paste0("$(",min(yp),", ",max(yp),")$")
} else {
    posint = ""
    negint = ""
    incint = ""
    decint = ""
    domint = ""
    ranint = ""
}


```

2. The function $f$ is graphed below.

```{r,echo=F,fig.dim=c(5,4)}
layout(matrix(c(1,1,1,1,2),nrow=1))
par(mar=c(0,0,0,0),pty="s")
plot(xa,ya,"l",xlim=c(-10,10),ylim=c(-10,10),axes=F,ann=F)
for(i in -10:10){
    abline(h=i,col="lightgrey",lwd=0.5)
    abline(v=i,col="lightgrey",lwd=0.5)
}
for(i in seq(-10,10,5)){
    abline(h=i,col="darkgrey",lwd=1)
    abline(v=i,col="darkgrey",lwd=1)
}
arrows(-10.3,0,10.3,0,0.1,10,3,lwd=2)
arrows(0,-10.3,0,10.3,0.1,10,3,lwd=2)
lines(xa,ya,col="blue",lwd=3)
points(xp,yp,pch=20,col="blue",cex=1.6)
points(xa[1],ya[1],pch=20,col="white",cex=0.8)
points(xa[length(xa)],ya[length(xa)],pch=20,col="white",cex=0.8)

text(10,-0.5,"10",cex=0.8)
text(-10,-0.5,"-10",cex=0.8)
text(-0.5,10,"10",cex=0.8)
text(-0.5,-10,"-10",cex=0.8)
text(10,0.5,"x",cex=0.8)
text(0.5,10,"y",cex=0.8)

plot(0,0,"n",axes=F,ann=F)
legend("center",legend="y = f(x)",col="blue",lwd=3)



```
\

Indicate the following intervals using interval notation. Remember, you can use $\cup$ between two intervals to indicate the union. Except for range, all intervals will indicate $x$ values; this is standard.

\begin{tabular}{|m{1in}|m{5in}|}\hline
Feature & Where \\ \hline \hline
Positive & \color{red}`r posint`\color{black} \\  [2.5em]  \hline
Negative & \color{red}`r negint`\color{black} \\  [2.5em]  \hline
Increasing & \color{red}`r incint`\color{black} \\ [2.5em]  \hline
Decreasing & \color{red}`r decint`\color{black} \\ [2.5em]  \hline
Domain & \color{red}`r domint`\color{black} \\ [2.5em]  \hline
Range & \color{red}`r ranint`\color{black} \\ [2.5em]  \hline
\end{tabular}




