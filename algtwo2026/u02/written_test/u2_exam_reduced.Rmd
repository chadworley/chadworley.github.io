---
header-includes:
   - \usepackage{array}
output: pdf_document
params:
    rseed: 0
    showsol: true
    titex: "practice"
urlcolor: blue
geometry: margin=1in
---

```{r,echo=F}
if(params$rseed != 0){
    set.seed(params$rseed)
}
```

\sc Name: \hspace{4in}  Date: \vspace{5pt} \hrule \rm

# Unit-2 Reduced Mastery Assessment (version `r params$rseed`)


### Question 1 (20 points)

```{r,echo=F}
# use sqrt, cbrt, cube, exp2, log2 for stretch/shift
# use sqrt, exp2, log2 for reflections

# shift left, right, up, down by distance 2
# stretch vbig, vshrink, hbig, hshrink by factor 2
# refl h, refl v
# 10 total transformations...

# 4 on page 1 and 6 on page 2?

flv = c("\\sqrt{x}","\\sqrt[3]{x}","x^3","2^{x}","\\log_{2}\\left(x\\right)","x^2")
flh = c("\\sqrt{x}","\\sqrt[3]{x}","\\left(x\\right)^3","2^{x}","\\log_{2}\\left(x\\right)","\\left(x\\right)^2")

fs = list(function(x){sqrt(x)},
          function(x){sign(x)*abs(x)^(1/3)},
          function(x){x^3},
          function(x){2^x},
          function(x){log2(x)},
          function(x){x^2})

xas = list(NA,NA,NA,c(-10,10),c(0,0),NA)
yas = list(NA,NA,NA,c(0,0),c(-10,10),NA)

xls = list(seq(0,12,0.01),
           seq(-12,12,0.01), 
           seq(-3,3,0.01),
           seq(-12,4,0.01),
           seq(0.0001,10.0001,0.01),
           seq(-4,4,0.01))
xps = list(c(0,1,4,9),
           c(-8,-1,0,1,8),
           c(-3,-2,-1,0,1,2,3),
           c(0,1,2,3),
           c(1,2,4,8),
           c(-3,-2,-1,0,1,2,3))
yls = list()
yps = list()
for(i in 1:6){
    yls[[i]] = fs[[i]](xls[[i]])
    yps[[i]] = fs[[i]](xps[[i]])
}

ord1 = c(sample(c(1,4,5),2),sample(c(1:6,2,3,6),8))

xl = list()
yl = list()
xp = list()
yp = list()
xa = list()
ya = list()

# vr, hr, l, r, u, d, hst, hsh, vst, vsh
tex1 = paste0("y=-",flv[ord1[1]])
xl[[1]] = xls[[ord1[1]]]
yl[[1]] = -yls[[ord1[1]]]
xp[[1]] = xps[[ord1[1]]]
yp[[1]] = -yps[[ord1[1]]]
xa[[1]] = xas[[ord1[1]]]
ya[[1]] = -yas[[ord1[1]]]

tex2 = paste0("y=",gsub("x","-x",flh[ord1[2]],fixed=T))
xl[[2]] = -xls[[ord1[2]]]
yl[[2]] = yls[[ord1[2]]]
xp[[2]] = -xps[[ord1[2]]]
yp[[2]] = yps[[ord1[2]]]
xa[[2]] = -xas[[ord1[2]]]
ya[[2]] = yas[[ord1[2]]]

tex3 = paste0("y=",gsub("x","x+2",flh[ord1[3]],fixed=T))
xl[[3]] = xls[[ord1[3]]]-2
yl[[3]] = yls[[ord1[3]]]
xp[[3]] = xps[[ord1[3]]]-2
yp[[3]] = yps[[ord1[3]]]
xa[[3]] = xas[[ord1[3]]]-2
ya[[3]] = yas[[ord1[3]]]

tex4 = paste0("y=",gsub("x","x-2",flh[ord1[4]],fixed=T))
xl[[4]] = xls[[ord1[4]]]+2
yl[[4]] = yls[[ord1[4]]]
xp[[4]] = xps[[ord1[4]]]+2
yp[[4]] = yps[[ord1[4]]]
xa[[4]] = xas[[ord1[4]]]+2
ya[[4]] = yas[[ord1[4]]]

tex5 = paste0("y=",flv[ord1[5]],"+2")
xl[[5]] = xls[[ord1[5]]]
yl[[5]] = yls[[ord1[5]]]+2
xp[[5]] = xps[[ord1[5]]]
yp[[5]] = yps[[ord1[5]]]+2
xa[[5]] = xas[[ord1[5]]]
ya[[5]] = yas[[ord1[5]]]+2

tex6 = paste0("y=",flv[ord1[6]],"-2")
xl[[6]] = xls[[ord1[6]]]
yl[[6]] = yls[[ord1[6]]]-2
xp[[6]] = xps[[ord1[6]]]
yp[[6]] = yps[[ord1[6]]]-2
xa[[6]] = xas[[ord1[6]]]
ya[[6]] = yas[[ord1[6]]]-2

tex7 = paste0("y=",gsub("x","\\frac{x}{2}",flh[ord1[7]],fixed=T))
xl[[7]] = xls[[ord1[7]]]*2
yl[[7]] = yls[[ord1[7]]]
xp[[7]] = xps[[ord1[7]]]*2
yp[[7]] = yps[[ord1[7]]]
xa[[7]] = xas[[ord1[7]]]*2
ya[[7]] = yas[[ord1[7]]]

tex8 = paste0("y=",gsub("x","2x",flh[ord1[8]],fixed=T))
xl[[8]] = xls[[ord1[8]]]/2
yl[[8]] = yls[[ord1[8]]]
xp[[8]] = xps[[ord1[8]]]/2
yp[[8]] = yps[[ord1[8]]]
xa[[8]] = xas[[ord1[8]]]/2
ya[[8]] = yas[[ord1[8]]]

tex9 = paste0("y=2\\cdot ",flv[ord1[9]])
xl[[9]] = xls[[ord1[9]]]
yl[[9]] = yls[[ord1[9]]]*2
xp[[9]] = xps[[ord1[9]]]
yp[[9]] = yps[[ord1[9]]]*2
xa[[9]] = xas[[ord1[9]]]
ya[[9]] = yas[[ord1[9]]]*2

tex10 = paste0("y=\\frac{",flv[ord1[10]],"}{2}")
xl[[10]] = xls[[ord1[10]]]
yl[[10]] = yls[[ord1[10]]]/2
xp[[10]] = xps[[ord1[10]]]
yp[[10]] = yps[[ord1[10]]]/2
xa[[10]] = xas[[ord1[10]]]
ya[[10]] = yas[[ord1[10]]]/2

texes = c(tex1,tex2,tex3,tex4,tex5,tex6,tex7,tex8,tex9,tex10)

ord2 = sample(1:10)

```

Graph the equations accurately. For each integer-integer point on the parent, indicate the corresponding point precisely. Also, with dashed lines, indicate any asymptotes.

```{r,echo=F,fig.dim=c(7,5)}
library(latex2exp)
par(mar=c(0,0,0,0),pty="s")

layout(matrix(c(1,2,4,3,5,6,8,7),2,byrow = T),c(1,2,2,1))

mkgrid = function(){
    plot(0,0,"n",xlim=c(-5,5),ylim=c(-5,5),axes=F,ann=F)
    for(jj in -5:5){
        lines(c(-5,5),c(jj,jj),col="grey",lwd=0.5)
        lines(c(jj,jj),c(-5,5),col="grey",lwd=0.5)
    }
    lines(c(-5,5),c(-5,-5),col="darkgrey",lwd=0.8)
    lines(c(-5,5),c(5,5),col="darkgrey",lwd=0.8)
    lines(c(-5,-5),c(-5,5),col="darkgrey",lwd=0.8)
    lines(c(5,5),c(-5,5),col="darkgrey",lwd=0.8)
    arrows(-5.2,0,5.2,0,0.03,15,3)
    arrows(0,-5.2,0,5.2,0.03,15,3)
    text(5,0,5,adj=c(0.5,1.5),cex=0.6)
    text(5,0,"x",adj=c(-0.3,-0.4),cex=0.6)
    text(0,5,5,adj=c(1.5,0.5),cex=0.6)
    text(0,5,"y",adj=c(-0.4,-0.3),cex=0.6)
}

for(i in 1:4){
    plot(0,0,"n",xlim=c(-1,1),ylim=c(-1,1),axes=F,ann=F)
    text(0,0,TeX(paste0("$",texes[ord2[i]],"$")),cex=1.5)
    
    mkgrid()
    if(params$showsol){
        if(!(is.na(xa[[ord2[i]]][1]))){
            lines(xa[[ord2[i]]],ya[[ord2[i]]],lty=2,col="red",lwd=1.3)
        }
        lines(xl[[ord2[i]]],yl[[ord2[i]]],col="red",lwd=1.3)
        points(xp[[ord2[i]]],yp[[ord2[i]]],pch=19,cex=0.7,col="red")
    }
}
```

\newpage

### Question 2 continued...

```{r,echo=F,fig.dim=c(7,7.5)}
library(latex2exp)
par(mar=c(0,0,0,0),pty="s")

layout(matrix(c(1,2,4,3,5,6,8,7,9,10,12,11),3,byrow = T),c(1,2,2,1))

for(i in 5:10){
    plot(0,0,"n",xlim=c(-1,1),ylim=c(-1,1),axes=F,ann=F)
    text(0,0,TeX(paste0("$",texes[ord2[i]],"$")),cex=1.5)
    
    mkgrid()
    
    if(params$showsol){
        if(!(is.na(xa[[ord2[i]]][1]))){
            lines(xa[[ord2[i]]],ya[[ord2[i]]],lty=2,col="red",lwd=1.3)
        }
        lines(xl[[ord2[i]]],yl[[ord2[i]]],col="red",lwd=1.3)
        points(xp[[ord2[i]]],yp[[ord2[i]]],pch=19,cex=0.7,col="red")
    }
}
```

\newpage


### Question 2 (20 points)


```{r,echo=F}
while(T){
    xp = sort(sample(-10:10,5))
    while(T){
        yp = sample(1:10,5,T)*c(1,-1,1,-1,-1)*sample(c(-1,1),1)
        if(abs(yp[5])<abs(yp[4])){break}
    }
    
    if(sample(1:2,1)==1){
        yp = rev(yp)
    }
    xa = min(xp):max(xp)
    ya = rep(0,length(xa))
    for(i in 1:length(xa)){
        x = xa[i]
        xl = max(xp[xp<=x])
        xr = min(c(xp[xp>x],xp[length(xp)]))
        yl = yp[xp==xl]
        yr = yp[xp==xr]
        rat = (x-xl)/(xr-xl)
        if(x>xl){
            ya[i] = yl*(1-rat)+yr*rat
        } else {
            ya[i] = yl
        }
        
    }
    if(sum(ya==0)==3 && !(min(ya)==min(xa) && max(ya)==max(xa))){break}
}

xpn = c(xa[1],xa[ya==0],xa[length(xa)])
ipos = character()
ineg = character()
for(i in 1:(length(xpn)-1)){
    xl = xpn[i]
    xr = xpn[i+1]
    xt = xl+1
    yl = ya[xa==xl]
    yt = ya[xa==xt]
    ymid = mean(c(yl,yt))
    if(ymid>0){
        ipos = c(ipos,paste0("(",xl,", ",xr,")",collapse=""))
    } else {
        ineg = c(ineg,paste0("(",xl,", ",xr,")",collapse=""))
    }
}
iinc = character()
idec = character()
for(i in 1:(length(xp)-1)){
    xl = xp[i]
    xr = xp[i+1]
    xt = xl+1
    yl = ya[xa==xl]
    yt = ya[xa==xt]
    if(yt>yl){
        iinc = c(iinc,paste0("(",xl,", ",xr,")",collapse=""))
    } else {
        idec = c(idec,paste0("(",xl,", ",xr,")",collapse=""))
    }
}


if(params$showsol){
    posint = paste0("$",paste0(ipos,collapse=" \\cup "),"$",collapse="")
    negint = paste0("$",paste0(ineg,collapse=" \\cup "),"$",collapse="")
    incint = paste0("$",paste0(iinc,collapse=" \\cup "),"$",collapse="")
    decint = paste0("$",paste0(idec,collapse=" \\cup "),"$",collapse="")
    domint = paste0("$(",min(xp),", ",max(xp),")$")
    ranint = paste0("$(",min(yp),", ",max(yp),")$")
} else {
    posint = ""
    negint = ""
    incint = ""
    decint = ""
    domint = ""
    ranint = ""
}


```

A function is graphed below.

```{r,echo=F,fig.dim=c(5,4)}
layout(matrix(c(1,1,1,1,2),nrow=1))
par(mar=c(0,0,0,0),pty="s")
plot(xa,ya,"l",xlim=c(-10,10),ylim=c(-10,10),axes=F,ann=F)
for(i in -10:10){
    lines(c(-10,10),c(i,i),col="lightgrey",lwd=0.5)
    lines(c(i,i),c(-10,10),col="lightgrey",lwd=0.5)
}
for(i in seq(-10,10,5)){
    lines(c(-10,10),c(i,i),col="darkgrey",lwd=1)
    lines(c(i,i),c(-10,10),col="darkgrey",lwd=1)
}
arrows(-10.3,0,10.3,0,0.1,10,3,lwd=2)
arrows(0,-10.3,0,10.3,0.1,10,3,lwd=2)
lines(xa,ya,col="blue",lwd=3)
points(xp,yp,pch=20,col="blue",cex=1.6)
points(xa[1],ya[1],pch=20,col="white",cex=0.8)
points(xa[length(xa)],ya[length(xa)],pch=20,col="white",cex=0.8)

text(10,-0.5,"10",cex=0.8)
text(-10,-0.5,"-10",cex=0.8)
text(-0.5,10,"10",cex=0.8)
text(-0.5,-10,"-10",cex=0.8)
text(10,0.5,"x",cex=0.8)
text(0.5,10,"y",cex=0.8)

plot(0,0,"n",axes=F,ann=F)
legend("center",legend="y = f(x)",col="blue",lwd=3)



```
\

Indicate the following intervals using interval notation.

\begin{tabular}{|m{1in}|m{5in}|}\hline
Feature & Where \\ \hline \hline
Positive & \color{red}`r posint`\color{black} \\  [2.5em]  \hline
Negative & \color{red}`r negint`\color{black} \\  [2.5em]  \hline
Increasing & \color{red}`r incint`\color{black} \\ [2.5em]  \hline
Decreasing & \color{red}`r decint`\color{black} \\ [2.5em]  \hline
Domain & \color{red}`r domint`\color{black} \\ [2.5em]  \hline
Range & \color{red}`r ranint`\color{black} \\ [2.5em]  \hline
\end{tabular}



